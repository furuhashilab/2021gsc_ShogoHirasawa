> ## 青山学院大学 地球社会共生学部 地球社会共生学科

平澤彰悟/ HIRASAWA SHOGO

学生番号 1A117134

指導教員 古橋大地 教授

©︎Furuhashi Laboratory/HIRASAWA SHOGO, CC BY 4.0

## Introduction:

地理情報システム（Geographic Information System; 以下 GIS）は自然災害における災害対応の場面で利活用されており、国内では 1995 年 兵庫県南部地震(1)以降、国外では 2010 年 ハイチ地震(2)を皮切りにその事例及び、研究が蓄積されてきた。災害発生直後、被害軽減のためには、自治体等の災害対策本部が GIS を用いて、現地の状況をいち早く把握し、的確な災害対応を実現することが重要である。これまでに、災害直後の対策を支援する GIS ツールや技術は数多く研究されてきた（3),(4),(5)。こういった先行研究を俯瞰してみると、災害直後の状況把握をするため手法として Web-GIS(5)が用いられていることがわかった。つまり、災害直後の現場把握を行う際にはインターネット環境があり、それにアクセスできることが前提とされている。2010 年 ハイチ地震発生時、ネットにアクセスできるハイチ人は国民全体の 11%であった（6)。2022 年 トンガの海底火山噴火では、海底ケーブルが切断され、インターネット環境から断絶する事態も起きた（7)。事前災害発生時には往々にしてインターネットに接続できない状況が発生するにも関わらず、オフライン環境前提として、GIS を活用する災害対応システムの提案はなされていない。そこで本研究は、自治体等の災害対策本部がオフライン環境を前提とした時に利活用することができる災害対応システムの提案を行う。

## Methods:

オフライン環境でも機能する GIS ツールを制作するために、The United Nations Vector Tile Toolkit（以下 UNVT）(8)を活用した。UNVT は UN Open GIS Initiative(9)のプロジェクトの 1 つとして採択されているもので、地図の整備が不十分な国の地域のデジタル地図の拡充を目的としたオープンソースのプロジェクトである。UNVT の技術をアップグレードさせ、Raspberry Pi を用いたオフライン環境下で動くオープンソース・ウェブ地図サーバー（以下 UNVT Portable）を完成させ、インターネットが無い環境でも災害対策本部が GIS を用いた災害対応を行うことを可能にした。以下に、UNVT Portable の実装工程を記述する。

次の 3 つの工程に分けて実装を行った。1.UNVT Portabl アクセスポイント化 2.タイルデータの制作 3.html ファイルの実装。この順番に沿って、各実装の詳細を紹介する。

- UNVT Portabl アクセスポイント化

Mac と UNVT Portable を Ethernet ケーブルで有線接続している状態で、実装に着手した。最初に以下のパッケージ 5 つ（apatch2、hostapd、dnsmasq、isc-dhcp-server、rng-tools）をインストールし、その後に UNVT Portable の IP アドレスの固定化、Wi-Fi の SSID と Pass の設定を行った。QR コード読み取りによる Wi-Fi 接続の簡便化も行い、特別な知識のない人でも、自分の所有する端末を用いて、オフライン環境下でデジタル地図をスマホや PC で閲覧可能とさせた。

- タイルデータの制作

二子玉川駅付近の Web 地図を制作した。本マップを表示するにあたり、次の 4 つのタイルデータ（道路ベクトルタイル・建物ベクトルタイル・二子玉川の空撮ラスタータイル・世田谷区避難所ベクトルタイル）を制作した。道路ベクトルタイル・建物ベクトルタイルは OpenStreetMap、二子玉川の空撮ラスタータイルは OpenAerialMap、世田谷区避難所ベクトルタイルは東京都オープンデータカタログサイトからデータを引用し、それを UNVT にも採用されているオープンソースソフトの Tippicanue で用いてタイル化を行った。

- html ファイルの実装

オフラインで機能する Web 地図アプリケーションを作成するため、MapLibre GL JS を使い実装を行った。上記で記載した、各タイルを Source レイヤーで指定し、道路ベクトルタイル・建物ベクトルタイル・二子玉川の空撮ラスタータイル・世田谷区避難所ベクトルタイルの順で記述し、避難所データが最前面となるよう Layers レイヤーに記述した。避難所のポイントデータは画像としてで表示させた。

## Results:

国連 UNVT 技術をベースに改良を加えたオフライン環境下で動くオープンソース・ウェブ地図サーバーの UNVT Portable を開発した。現行の UNVT 技術をオフライン環境下で用いるには Ethernet ケーブルによる有線接続が前提であったが、本研究によってこれを Wi-Fi 経由で利用可能にした。UNVT Portable に地域のオープンデータをプリインストールしておくことで、災害時などの停電時などにも行政が設置する災害対策本部などでバックアップウェブ地図システムとして利用できるだけでなく、災害対応で緊急撮影を行ったドローンなどの空撮画像データを重畳することもできる。本研究は激甚災害時のオフライン環境下で動くオープンソース・ウェブ地図サーバーとして開発したが、仕様する地図データの組み合わせを変えることで、他の目的でも利用できる。国連で使用が検討されている PKO の国境監視業務をはじめ、僻地等のオフライン環境下での Web 地図利用が求められる際に UNVT Portable を活用することができる。

## Discussion:

What do your findings mean? あなたが見つけたことは何を意味するのか？どんな議論をしたか。(500 文字以内で簡単に記述する)

## Conclusion:

What have you learned from the study? この研究を通じて得られたものは？次に引き継ぐべき課題は？(500 文字以内で簡単に記述する)
mapbox を用いた Web 地図作成において必要な概念である Sources や Layers を理解するため、Mapbox Style Specification の和訳を行った。
UNVTPortable としての現状の完成度は 80%程であると考える。ウェブ地図サーバーとして機能させるために毎回、コマンド入力が必要なため、コマンド入力を不要にさせ、電源を入れるだけでサーバーとして機能させることがゴールである。併せて、東京都をテキストエリアとして、行政が公開するオープンデータと、ベースマップとしての OpenStreetMap データを組み合わせ、プリインストールデータセットの試作も必要である。上記の課題を踏まえ、今後、国連と連携をとりながら、さらなる開発を進めていく。

## Reference/参考文献:

１)碓井照子: 阪神・淡路大震災と国土空間基盤整備、地理空間情報科学事典（地理情報システム学会編）、
2004、pp.394-397
2 )https://www.jstage.jst.go.jp/article/seisankenkyu/62/4/62_4_409/_pdf/-char/ja 3)https://ipsj.ixsq.nii.ac.jp/ej/?action=pages_view_main&active_action=repository_view_main_item_detail&item_id=39389&item_no=1&page_id=13&block_id=8 4)https://www.jstage.jst.go.jp/article/ajg/2016a/0/2016a_100175/_pdf/-char/ja 5)https://www.jstage.jst.go.jp/article/jaee/15/1/15_1_101/_pdf 6)http://edition.cnn.com/2010/TECH/01/20/haiti.amateur.radio/index.html 7)https://www.asahi.com/articles/ASQ1L5GMTQ1LUHBI02V.html 8)https://unvt.github.io/
(9)http://unopengis.org/unopengis/about/about05.php

## Acknowledgements/謝辞:

本研究を進めるにあたり〇〇〇の〇〇氏をはじめ多くの方々より多大な助言を賜りました。厚く感謝を申し上げます。
